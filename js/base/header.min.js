!function($,_undefined){"use strict";const _window=window;_window.$ush=_window.$ush||{};_window.$us.canvas=_window.$us.canvas||{};function toBoolean(value){if(typeof value=='boolean'){return value}
if(typeof value=='string'){value=value.trim();return value.toLocaleLowerCase()=='true'||value=='1'}
return!!parseInt(value)}
function USHeader(settings){const self=this;self.$container=$('.l-header',$us.$canvas);self.$showBtn=$('.w-header-show:first',$us.$body);self.settings=settings||{};self.canvasOffset=0;self.bodyHeight=$us.$body.height();self.adminBarHeight=0;self._states={init_height:0,scroll_direction:'down',sticky:!1,sticky_auto_hide:!1,vertical_scrollable:!1};if(self.$container.length===0){return}
self.breakpoints={laptops:1280,tablets:1024,mobiles:600};for(const k in self.breakpoints){self.breakpoints[k]=parseInt(((self.settings[k]||{}).options||{}).breakpoint)||self.breakpoints[k]}
self._events={swichVerticalScrollable:self.swichVerticalScrollable.bind(self),hideMobileVerticalHeader:self.hideMobileVerticalHeader.bind(self),changeSticky:self.changeSticky.bind(self),contentChange:self.contentChange.bind(self),showBtn:self.showBtn.bind(self),scroll:$ush.debounce(self.scroll.bind(self),1),resize:$ush.debounce(self.resize.bind(self),1),};self._states.init_height=self.getHeight();$us.$window.on('scroll.noPreventDefault',self._events.scroll).on('resize load',self._events.resize);self.$container.on('contentChange',self._events.contentChange);self.$showBtn.on('click',self._events.showBtn);self.on('changeSticky',self._events.changeSticky).on('swichVerticalScrollable',self._events.swichVerticalScrollable);self.setView($us.$body.usMod('state')||'default');self.resize();if(self.stickyAutoHideEnabled()){self.$container.addClass('sticky_auto_hide')}
self.$container.on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',$ush.debounce(()=>{self.trigger.call(self,'transitionEnd')},1))}
$.extend(USHeader.prototype,$us.mixins.Events,{prevScrollTop:0,currentStateIs:function(state){return(state&&['default','laptops','tablets','mobiles'].includes(state)&&this.state===state)},isVertical:function(){return this.orientation==='ver'},isHorizontal:function(){return this.orientation==='hor'},isFixed:function(){return this.pos==='fixed'},isStatic:function(){return this.pos==='static'},isTransparent:function(){return this.bg==='transparent'},_isWithinScrollBoundaries:function(scrollTop){scrollTop=Math.ceil(scrollTop);return(scrollTop+_window.innerHeight>=$us.$document.height())||scrollTop<=0},isHidden:function(){return!!$us.header.settings.is_hidden},stickyEnabled:function(){return((this.settings[this.state]||{}).options||{}).sticky||!1},stickyAutoHideEnabled:function(){return this.stickyEnabled()&&(((this.settings[this.state]||{}).options||{}).sticky_auto_hide||!1)},isPinned:function(){return this._states.sticky||!1},isStickyAutoHidden:function(){return this._states.sticky_auto_hide||!1},getHeaderInitialPos:function(){return $us.$body.usMod('headerinpos')||''},getScrollDirection:function(){return this._states.scroll_direction||'down'},getHeight:function(){const self=this;if(!self.$container.length){return 0}
const beforeContent=getComputedStyle(self.$container[0],':before').content;var height=0;if(beforeContent&&['none','auto'].includes(beforeContent)===!1){height=beforeContent.replace(/[^+\d]/g,'')}
if(!height){height=self.$container.outerHeight()}
return $ush.parseFloat(height)},getInitHeight:function(){return $ush.parseInt(this._states.init_height)||this.getHeight()},getCurrentHeight:function(adminBar){const self=this;var height=0;if(adminBar&&self.isHorizontal()&&(!self.currentStateIs('mobiles')||(self.adminBarHeight&&self.adminBarHeight>=self.getScrollTop()))){height+=self.adminBarHeight}
if(!self.isStickyAutoHidden()){height+=self.getHeight()}
return height},getScrollTop:function(){return _window.scrollY||this.prevScrollTop},prevOffsetTop:0,getOffsetTop:function(){return(this.prevOffsetTop=Math.max(this.prevOffsetTop,$ush.parseFloat(this.$container.css('top'))))},isScrollAtTopPosition:function(){return $ush.parseInt(_window.scrollY)===0},setView:function(newState){const self=this;if(newState==self.state){return}
var options=(self.settings[newState]||{}).options||{},orientation=options.orientation||'hor',pos=toBoolean(options.sticky)?'fixed':'static',bg=toBoolean(options.transparent)?'transparent':'solid',shadow=options.shadow||'thin';if(orientation==='ver'){pos='fixed';bg='solid'}
self._setPos(pos);self._setBg(bg);self._setShadow(shadow);self.orientation=orientation
self.state=newState
if($us.nav!==_undefined){$us.nav.resize()}
if(self.stickyAutoHideEnabled()){self.$container.removeClass('down')}},_setPos:function(pos){const self=this;if(pos===self.pos){return}
self.$container.usMod('pos',self.pos=pos);if(self.pos==='static'){self.trigger('changeSticky',!1)}},_setBg:function(bg){const self=this;if(bg!=self.bg){self.$container.usMod('bg',self.bg=bg)}},_setShadow:function(shadow){const self=this;if(shadow!=self.shadow){self.$container.usMod('shadow',self.shadow=shadow)}},_isVerticalScrollable:function(){const self=this;if(!self.isVertical()){return}
if((self.currentStateIs('default')||self.currentStateIs('laptops'))&&self.isFixed()){self.$container.addClass('scrollable');var headerHeight=self.getHeight(),canvasHeight=parseInt($us.canvas.winHeight),documentHeight=parseInt($us.$document.height());self.$container.removeClass('scrollable');if((headerHeight/canvasHeight)>1.05){self.trigger('swichVerticalScrollable',!0)}else if(self._states.vertical_scrollable){self.trigger('swichVerticalScrollable',!1)}
if((headerHeight/documentHeight)>1.05){self.$container.css({position:'absolute',top:0})}}else if(self._states.vertical_scrollable){self.trigger('swichVerticalScrollable',!1)}},swichVerticalScrollable:function(_,state){const self=this;self.$container.toggleClass('scrollable',self._states.vertical_scrollable=!!state);if(!self._states.vertical_scrollable){self.$container.resetInlineCSS('position','top','bottom');delete self._headerScrollRange}},changeSticky:function(_,state){const self=this;self._states.sticky=!!state;var currentHeight=self.getCurrentHeight(!0),resetCss=['position','top','bottom'];if($us.canvas.hasStickyFirstSection()&&self.getHeaderInitialPos()=='bottom'&&!self.stickyAutoHideEnabled()){resetCss=resetCss.filter((value)=>{return value!=='top'})}
self.$container.toggleClass('sticky',self._states.sticky).resetInlineCSS(resetCss);if(currentHeight==self.getCurrentHeight(!0)){self.trigger('transitionEnd')}},contentChange:function(){this._isVerticalScrollable()},showBtn:function(e){const self=this;if($us.$body.hasClass('header-show')){return}
e.stopPropagation();$us.$body.addClass('header-show').on(($.isMobile?'touchstart.noPreventDefault':'click'),self._events.hideMobileVerticalHeader)},hideMobileVerticalHeader:function(e){const self=this;if($.contains(self.$container[0],e.target)){return}
$us.$body.off(($.isMobile?'touchstart':'click'),self._events.hideMobileVerticalHeader);$ush.timeout(()=>$us.$body.removeClass('header-show'),10)},scroll:function(){const self=this;var scrollTop=self.getScrollTop(),headerAbovePosition=(self.getHeaderInitialPos()==='above');if(self.prevScrollTop!=scrollTop){self._states.scroll_direction=(self.prevScrollTop<=scrollTop)?'down':'up'}
self.prevScrollTop=scrollTop;if(self.isScrollAtTopPosition()){self._states.scroll_direction='up'}
if(self.stickyAutoHideEnabled()&&self.isPinned()&&!self._isWithinScrollBoundaries(scrollTop)&&!headerAbovePosition){self._states.sticky_auto_hide=(self.getScrollDirection()==='down');self.$container.toggleClass('down',self._states.sticky_auto_hide)}
if(!self.isFixed()){return}
var headerAttachedFirstSection=['bottom','below'].includes(self.getHeaderInitialPos());if(self.isHorizontal()&&(headerAbovePosition||(headerAttachedFirstSection&&(self.currentStateIs('tablets')||self.currentStateIs('mobiles')))||!headerAttachedFirstSection)){if(self.stickyEnabled()){var scrollBreakpoint=parseInt(((self.settings[self.state]||{}).options||{}).scroll_breakpoint)||100,isSticky=Math.ceil(scrollTop)>=scrollBreakpoint;if(isSticky!=self.isPinned()){self.trigger('changeSticky',isSticky)}}
if(self.isPinned()&&!_window.scrollY){self.trigger('changeSticky',!1)}}
if(self.isHorizontal()&&headerAttachedFirstSection&&!headerAbovePosition&&(self.currentStateIs('default')||self.currentStateIs('laptops'))){var top=($us.canvas.getHeightFirstSection()+self.adminBarHeight);if(self.getHeaderInitialPos()=='bottom'){top-=self.getInitHeight()}
if(self.stickyEnabled()){var isSticky=scrollTop>=top;if(isSticky!=self.isPinned()){self.trigger('changeSticky',isSticky)}}
if(!self.isPinned()&&top!=self.getOffsetTop()){self.$container.css('top',top)}}
if(self.isVertical()&&!headerAttachedFirstSection&&!headerAbovePosition&&self._states.vertical_scrollable){var headerHeight=self.getHeight(),documentHeight=parseInt($us.$document.height());if(documentHeight>headerHeight){var canvasHeight=parseInt($us.canvas.winHeight)+self.canvasOffset,scrollRangeDiff=(headerHeight-canvasHeight),cssProps;if(self._headerScrollRange===_undefined){self._headerScrollRange=[0,scrollRangeDiff]}
if(self.bodyHeight>headerHeight){if(scrollTop<self._headerScrollRange[0]){self._headerScrollRange[0]=Math.max(0,scrollTop);self._headerScrollRange[1]=(self._headerScrollRange[0]+scrollRangeDiff);cssProps={position:'fixed',top:self.adminBarHeight}}else if(self._headerScrollRange[0]<scrollTop&&scrollTop<self._headerScrollRange[1]){cssProps={position:'absolute',top:self._headerScrollRange[0]}}else if(self._headerScrollRange[1]<=scrollTop){self._headerScrollRange[1]=Math.min(documentHeight-canvasHeight,scrollTop);self._headerScrollRange[0]=(self._headerScrollRange[1]-scrollRangeDiff);cssProps={position:'fixed',top:(canvasHeight-headerHeight)}}}else{cssProps={position:'absolute',top:self.adminBarHeight,}}
if(cssProps){self.$container.css(cssProps)}}}},resize:function(){const self=this;self.canvasOffset=$us.$window.outerHeight()-$us.$window.innerHeight();self.bodyHeight=$us.$body.height();self.adminBarHeight=$us.getAdminBarHeight()||0;if(self.isFixed()&&self.isHorizontal()){self.$container.addClass('notransition');$ush.timeout(()=>self.$container.removeClass('notransition'),50)}
self._isVerticalScrollable();self.scroll()}});_window.USHeader=USHeader;$us.header=new USHeader($us.headerSettings||{})}(jQuery)